/*
 Navicat Premium Data Transfer

 Source Server         : æœ¬åœ°å®å¡”
 Source Server Type    : MySQL
 Source Server Version : 80025
 Source Host           : localhost:3306
 Source Schema         : weline

 Target Server Type    : MySQL
 Target Server Version : 80025
 File Encoding         : 65001

 Date: 01/09/2022 23:16:37
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for m_document
-- ----------------------------
DROP TABLE IF EXISTS `m_document`;
CREATE TABLE `m_document`  (
  `id` smallint(0) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `category_id` smallint(0) NOT NULL COMMENT 'åˆ†ç±»ID',
  `title` varchar(120) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'æ ‡é¢˜',
  `summary` varchar(250) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'æ‘˜è¦',
  `author_id` smallint(0) NULL DEFAULT 0 COMMENT 'ä½œè€…ID',
  `content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT 'å†…å®¹',
  `create_time` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) ON UPDATE CURRENT_TIMESTAMP(0) COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 17 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = 'å¼€å‘æ–‡ç« ' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of m_document
-- ----------------------------
INSERT INTO `m_document` VALUES (1, 1, 'æ¡†æ¶è®¾è®¡ç†å¿µ', 'WelineFrameworkæ¡†æ¶è®¾è®¡ç›®çš„å°±æ˜¯ä¸ºäº†è§£å†³ä¼˜é›…é«˜æ•ˆå’Œæ€§èƒ½ä¹‹é—´çš„çŸ›ç›¾é—®é¢˜ã€‚æ‰“é€ ä¸€æ¬¾çµæ´»å¿«é€Ÿå¼€å‘åŒæ—¶å…¼å®¹é«˜æ€§èƒ½çš„PHP Webå¼€å‘æ¡†æ¶ã€‚', 1, '<p>å‰è¨€ï¼šç›®å‰çš„æ¡†æ¶å‡ ä¹éƒ½å­˜åœ¨ä¸€ä¸ªæ— å¯å›é¿çš„é—®é¢˜ï¼Œä¼˜é›…å’Œæ€§èƒ½æ— æ³•åšåˆ°å‹å¥½å¹³è¡¡ã€‚æœ¬æ¡†æ¶è®¾è®¡ä¹‹åˆå°±æ˜¯ä¸ºäº†æ³¨é‡è§£å†³é«˜æ•ˆå’Œæ€§èƒ½ä¹‹é—´çš„ä¸»è¦çŸ›ç›¾é—®é¢˜ï¼Œä½¿å¾—ä¼˜é›…é«˜æ•ˆçš„å¼€å‘æƒ…å½¢ä¸‹ä»ç„¶æ‹¥æœ‰ä¸å¯å¿½è§†çš„é«˜æ€§èƒ½ä¼˜åŠ¿ã€‚</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>', '2022-04-25 21:00:54', '2022-04-28 21:47:26');
INSERT INTO `m_document` VALUES (2, 2, 'å®‰è£…ç¯å¢ƒ', 'WelineFrameworkå®‰è£…ç¯å¢ƒ', 1, '<p><span style=\"color: #000000;\"><strong>1ã€PHP8ä»¥ä¸Šï¼›</strong></span></p>\r\n<pre><strong>[æ–¹æ³•]</strong><br /><strong>exec</strong><br /><strong>putenv</strong><br /><strong>symlink</strong><br /><strong>proc_opengit</strong><br /><strong>proc_get_status</strong><br /><strong>[æ‹“å±•]</strong><br /><strong>ext-exif</strong><br /><strong>ext-fileinfo</strong><br /><strong>ext-xsl</strong></pre>\r\n<p><strong>2ã€1Gå†…å­˜ä»¥ä¸Šï¼›</strong></p>\r\n<p><strong>3ã€mysql5.7ä»¥ä¸Šï¼›</strong></p>\r\n<p>&nbsp;</p>', '2022-04-28 21:55:46', '2022-04-28 22:04:45');
INSERT INTO `m_document` VALUES (3, 2, 'Nginx', 'Nginxç¯å¢ƒä¸‹å®‰è£…WelineFramework', 1, '<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰nginxé…ç½®æ–‡ä»¶</p>\r\n<p>nginx.conf</p>\r\n<p>å°†è¿™ä¸ªæ–‡ä»¶å¼•å…¥åˆ°ç½‘ç«™çš„nginxæœªçŸ¥æ–‡ä»¶ä¸­å³å¯ã€‚</p>\r\n<p>&nbsp;</p>\r\n<p>éšåè®¿é—®è¿›å…¥æ¡†æ¶å®‰è£…ç•Œé¢ï¼ŒæŒ‰ç…§æ­¥éª¤è¿›è¡Œé…ç½®å³å¯ã€‚</p>\r\n<p>&nbsp;</p>', '2022-04-26 22:24:38', '2022-04-28 22:04:53');
INSERT INTO `m_document` VALUES (4, 2, 'Apache', 'Apacheç¯å¢ƒä¸‹å®‰è£…WelineFrameworkæ¡†æ¶', 1, '<p>ç›´æ¥è®¿é—®åŸŸåè¿›å…¥webå®‰è£…ç•Œé¢è¿›è¡Œå®‰è£…ã€‚</p>', '2022-04-26 22:28:01', '2022-04-28 22:04:57');
INSERT INTO `m_document` VALUES (7, 6, 'å¿«é€Ÿå»ºç«‹ä¸€ä¸ªæ¨¡å‹', 'å¿«é€Ÿåˆ›å»ºWelineFrameworkæ¨¡å‹', 1, '<h1 style=\"color: #ff0000;\">#1 ä»€ä¹ˆæ˜¯æ¨¡ç»„ï¼Ÿ</h1>\r\n<p>WelineFrameworkæ¡†æ¶å®ç°webåŠŸèƒ½çš„ä»£ç åŠŸèƒ½é›†åˆï¼Œä¸€ä¸ªæ¨¡ç»„åŒ…å«æ™®é€šçš„MVCåŠŸèƒ½ã€‚</p>\r\n<h1 style=\"color: #ff0000;\">#2 æ¨¡ç»„åŸºæœ¬ç»“æ„ã€‚</h1>\r\n<p>ä»¥Aiweline_Indexæ¨¡ç»„ä¸ºä¾‹ï¼Œä»¥ä¸‹æ˜¯Aiweline_Indexæ¨¡ç»„çš„åŸºæœ¬ç›®å½•ã€‚</p>\r\n<p>*æ³¨æ„ï¼šæ¨¡ç»„çš„å®‰è£…æ”¯æŒcomposerå®‰è£…ï¼ˆæ­¤å®‰è£…æ¨¡å¼ä¸‹ä»£ç ä¸åœ¨app/code/ç›®å½•ä¸‹ï¼‰ã€‚</p>\r\n<p><img src=\"../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/æ¨¡å‹ç»“æ„png.png\" alt=\"\" width=\"309\" height=\"335\" /></p>\r\n<p><br />Aiweline &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# ä»£ç ä¾›åº”å•†åï¼ˆè‡ªå·±çš„ä¾›åº”å•†åè‡ªå·±å†™ï¼‰</p>\r\n<p>Index &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # æ¨¡å‹åï¼ˆæ¨¡å‹çš„åå­—ï¼Œè‡ªå·±å®šä¹‰ï¼‰</p>\r\n<p>ç»“æ„è¯´æ˜ï¼š</p>\r\n<p>Api &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # ç›®å½•æ˜¯æ¨¡ç»„çš„æ¥å£ç›®å½•</p>\r\n<p>Controller &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# æ¨¡ç»„æ§åˆ¶å™¨ç›®å½•</p>\r\n<p>etc &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # æ¨¡ç»„é…ç½®ç›®å½•</p>\r\n<p>Model &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # æ¨¡ç»„æ•°æ®åº“æ¨¡å‹</p>\r\n<p>test &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # å¯æœ‰å¯æ— ï¼Œå•å…ƒæµ‹è¯•ç›®å½•</p>\r\n<p>view &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# è§†å›¾ç›®å½•</p>\r\n<p>register.php &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# æ¨¡å‹æ³¨å†Œæ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰</p>\r\n<p>register.phpæ–‡ä»¶å†…å®¹ï¼š</p>\r\n<p><code><!--?php</code--></code></p>\r\n<p><code>/*</code><br /><code>&nbsp;* æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code>&nbsp;* é‚®ç®±ï¼šaiweline@qq.com</code><br /><code>&nbsp;* ç½‘å€ï¼šaiweline.com</code><br /><code>&nbsp;* è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code>&nbsp;*/</code></p>\r\n<p><code>use Weline\\Framework\\Register\\Register;</code></p>\r\n<p><code>Register::register(</code><br /><code>&nbsp; &nbsp; Register::MODULE,</code><br /><code>&nbsp; &nbsp; \'Aiweline_Index\',</code><br /><code>&nbsp; &nbsp; __DIR__,</code><br /><code>&nbsp; &nbsp; \'1.1.0\',</code><br /><code>&nbsp; &nbsp; \'</code></p>\r\n<p>æ¨¡ç»„åï¼šAiweline_Index</p>\r\n<p><code></code><br /><code></code></p>\r\n<p>æè¿°ï¼šé¦–é¡µåº”ç”¨ï¼Œæ­¤åº”ç”¨ç”¨äºé…ç½®ç½‘ç«™é¦–é¡µï¼</p>\r\n<p><code></code><br /><code></code></p>\r\n<p>ä½œè€…ï¼šç§‹æ«é›é£ï¼ˆAiwelineï¼‰</p>\r\n<p><code></code><br /><code></code></p>\r\n<p>ç­¾åï¼šäººç”Ÿæ€»è¦åšç‚¹æœ‰æ„ä¹‰çš„äº‹å„¿ï¼Œéæ˜¯ä¸€å®šè¦æˆåŠŸï¼Œä½†æ˜¯ä¸€å®šæ˜¯åœ¨åšã€‚</p>\r\n<p><code></code><br /><code>\'</code><br /><code>);</code></p>\r\n<p>&nbsp;</p>\r\n<p><br />ä¸€ä¸ªæ¨¡ç»„è¦è¢«æ¡†æ¶è¯†åˆ«ï¼Œé‚£ä¹ˆregister.phpæ–‡ä»¶å°±æ˜¯å£°æ˜è¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªæ¡†æ¶æ¨¡å‹çš„å£°æ˜æ–‡ä»¶ã€‚</p>\r\n<p>&nbsp;</p>\r\n<h1 style=\"color: #ff0000;\"><br /># 3å®‰è£…æ¨¡ç»„</h1>\r\n<p>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼šæ‰§è¡Œå‘½ä»¤php bin/m module:upgrade&nbsp;</p>\r\n<p>å…³äºå‘½ä»¤çš„ä½¿ç”¨ï¼šè¯·æ‰§è¡Œphp bin/m æŸ¥çœ‹å‘½ä»¤ä½¿ç”¨</p>\r\n<h1 style=\"color: #ff0000;\">#4éªŒè¯æ¡†æ¶æ˜¯å¦å·²ç»å®‰è£…æ­¤æ¨¡ç»„</h1>\r\n<p><img src=\"../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/æ¨¡å‹å®‰è£…éªŒè¯.png\" alt=\"\" width=\"1371\" height=\"452\" /></p>\r\n<p><br />å¦‚æœå‡ºç°ç±»ä¼¼ä»¥ä¸Šç»“æœï¼Œè¡¨æ˜æ¨¡å‹å®‰è£…æˆåŠŸï¼</p>\r\n<h1 style=\"color: #ff0000;\"># 4 å»ºç«‹æ§åˆ¶å™¨</h1>\r\n<p>å»ºç«‹æ§åˆ¶å™¨ä¹‹å‰ï¼Œé…ç½®è·¯ç”±å…¥å£</p>\r\n<p>etc/env.phpæ–‡ä»¶ä¸­å½•å…¥è·¯ç”±å…¥å£ï¼Œæˆ‘ä»¬ä»¥indexä¸ºä¾‹ã€‚env.phpå†…å®¹å¦‚ä¸‹ï¼š</p>\r\n<p><code><!--?php</code--></code></p>\r\n<p><code>/*</code><br /><code>&nbsp;* æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code>&nbsp;* é‚®ç®±ï¼šaiweline@qq.com</code><br /><code>&nbsp;* ç½‘å€ï¼šaiweline.com</code><br /><code>&nbsp;* è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code>&nbsp;*/</code></p>\r\n<p><code>return [</code><br /><code>&nbsp; &nbsp; \'router\' &nbsp; &nbsp; &nbsp; =&gt; \'index\',//è·¯ç”±</code><br /><code>&nbsp; &nbsp; \'dependencies\' =&gt; [</code><br /><code>&nbsp; &nbsp; ]</code><br /><code>];</code></p>\r\n<p><br /><code>router &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # è·¯ç”±å…¥å£</code></p>\r\n<p><code>dependencies &nbsp; &nbsp; &nbsp; &nbsp;# ä¾èµ–çš„å…¶ä»–æ¨¡å—</code></p>\r\n<p><code>é…ç½®å®Œæˆåï¼Œè¿›è¡Œæ§åˆ¶å™¨ç±»åˆ›å»º</code></p>\r\n<p><code>åœ¨Controllerç›®å½•ä¸‹å»ºç«‹phpç±»ï¼Œå‰ç«¯urlç»§æ‰¿ Weline\\Framework\\App\\Controller\\FrontendController</code></p>\r\n<p><code>å†…å®¹å¦‚ä¸‹ï¼š</code></p>\r\n<p><code><!--?php</code--></code></p>\r\n<p><code>/*</code><br /><code>&nbsp;* æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code>&nbsp;* é‚®ç®±ï¼šaiweline@qq.com</code><br /><code>&nbsp;* ç½‘å€ï¼šaiweline.com</code><br /><code>&nbsp;* è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code>&nbsp;*/</code></p>\r\n<p><code>namespace Aiweline\\Index\\Controller;</code></p>\r\n<p><code>use Weline\\Framework\\App\\Controller\\FrontendController;</code></p>\r\n<p><code>class Index extends FrontendController</code><br /><code>{</code></p>\r\n<p><code>&nbsp; &nbsp; /**</code><br /><code>&nbsp; &nbsp; &nbsp;* @DESC &nbsp; &nbsp; &nbsp; &nbsp; |é¦–é¡µ</code><br /><code>&nbsp; &nbsp; &nbsp;*</code><br /><code>&nbsp; &nbsp; &nbsp;* å‚æ•°åŒºï¼š</code><br /><code>&nbsp; &nbsp; &nbsp;*</code><br /><code>&nbsp; &nbsp; &nbsp;*/</code><br /><code>&nbsp; &nbsp; public function index()</code><br /><code>&nbsp; &nbsp; {</code><br /><code>&nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;fetch();</code><br /><code>&nbsp; &nbsp; }</code><br /><code>}</code></p>\r\n<p>ä¸‹ä¸€æ­¥å»ºç«‹è§†å›¾æ–‡ä»¶<br />åœ¨æ¨¡å‹ç›®å½•viewä¸‹é¢å»ºç«‹templates/Index/index.phtml<br />æ–‡ä»¶å†…å®¹ï¼š</p>\r\n<p><code></code><br /><code></code><br /><code></code><br /><code></code></p>\r\n<h1>Hello World!æ¡†æ¶æµ‹è¯•é¦–é¡µ</h1>\r\n<p><code></code><br /><code></code><br /><code></code></p>\r\n<p><br /><span style=\"color: #e03e2d;\">*langæ ‡ç­¾æ˜¯æ¡†æ¶çš„i18nå¤šè¯­è¨€ç¿»è¯‘æ¨¡æ¿æ ‡ç­¾ï¼Œè¡¨ç°å½¢å¼è¿˜å¯ä»¥æœ‰ï¼š@lang(æ¡†æ¶æµ‹è¯•é¦–é¡µ)æˆ–è€…@lang{æ¡†æ¶æµ‹è¯•é¦–é¡µ}</span></p>\r\n<p>&nbsp;</p>\r\n<h1 style=\"color: #ff0000;\"># 5 æ³¨å†Œæ§åˆ¶å™¨ï¼ˆæ¯ä¸ªæ–°çš„æ§åˆ¶ç±»åˆ›å»ºéƒ½éœ€è¦æ³¨å†Œåˆ°æ¡†æ¶ï¼‰</h1>\r\n<p><br />é¡¹ç›®ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯æ‰§è¡Œphp bin/m module:upgrade &nbsp;<span style=\"color: #e03e2d;\">*æ¯ä¸ªæ–°çš„æ§åˆ¶å™¨ç±»ä¸€æ—¦åˆ›å»ºå‡ºæ¥éƒ½éœ€è¦æ‰§è¡Œè¿™ä¸ªå‘½ä»¤æ³¨å†Œåˆ°æ¡†æ¶ç³»ç»Ÿä¸­ã€‚</span></p>\r\n<p>&nbsp;</p>\r\n<h1 style=\"color: #ff0000;\"># 6 éªŒè¯æ§åˆ¶</h1>\r\n<p><img src=\"../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/æ§åˆ¶å™¨æµ‹è¯•.png\" alt=\"\" width=\"1907\" height=\"730\" /></p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>å¿«é€Ÿ åˆ›å»ºä¸€ä¸ªæ¨¡å‹ å®Œæˆï¼</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>', '2022-04-30 21:25:28', '2022-05-04 00:20:34');
INSERT INTO `m_document` VALUES (8, 9, 'åˆ›å»ºæ§åˆ¶å™¨', 'æ€æ ·å¿«é€Ÿåˆ›å»ºWelineFrameworkæ¡†æ¶æ¨¡ç»„æ§åˆ¶å™¨ï¼Ÿ', 1, '<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡ç»„ï¼Œåˆ›å»ºæ¨¡ç»„è¯·å‚è€ƒ<a title=\"æ€æ ·å¿«é€Ÿå»ºç«‹æ¨¡ç»„\" href=\"../../../../../dev/tool/document?id=7\" target=\"_blank\" rel=\"noopener\">æ€æ ·å¿«é€Ÿå»ºç«‹æ¨¡ç»„</a></p>\r\n<p>åœ¨etc/env.phpæ–‡ä»¶æ•°ç»„ä¸­å»ºç«‹è·¯ç”±ã€‚</p>\r\n<pre><code><!--?php</code--><br /><br /><code>/*</code><br /><code> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code> * é‚®ç®±ï¼šaiweline@qq.com</code><br /><code> * ç½‘å€ï¼šaiweline.com</code><br /><code> * è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code> */</code><br /><br /><code>return [</code><br /><code>    \'router\'       =&gt; \'index\',//è·¯ç”±</code><br /><code>    \'dependencies\' =&gt; [</code><br /><code>    ]</code><br /><code>];</code></code></pre>\r\n<p>æ¨¡ç»„ç›®å½•ä¸‹åˆ›å»ºControllerç›®å½•ã€‚å­ç›®å½•æ—¢æ˜¯urlçš„è·¯å¾„ã€‚</p>\r\n<p><span style=\"color: #e03e2d;\">ä¾‹å¦‚ï¼štest/demo/index</span></p>\r\n<p><span style=\"color: #e03e2d;\">é‚£ä¹ˆåœ¨ç›®å½•ä¸­å¯ä»¥è¡¨ç°ä¸ºï¼š</span></p>\r\n<p><span style=\"color: #e03e2d;\">Controller\\test\\Demo.php</span></p>\r\n<p><span style=\"color: #e03e2d;\">å‰©ä½™çš„indexæŒ‡çš„æ˜¯Demo.phpä¸­çš„ç±»indexæ–¹æ³•:</span></p>\r\n<p>åˆ›å»ºä»»æ„åå­—çš„Controllerç±»ï¼Œç»§æ‰¿ç±»æœ‰FrontendController,BackendController,FrontendRestController,BackendRestController,æ‰€æœ‰æ§åˆ¶å™¨ç±»å‹ä½äºWeline\\Framework\\App\\Controllerä¸‹ã€‚</p>\r\n<p><img src=\"../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/æ§åˆ¶å™¨ç›®å½•.png\" alt=\"\" width=\"571\" height=\"180\" /></p>\r\n<p>FrontendController&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # å‰ç«¯æ§åˆ¶å™¨</p>\r\n<p>BackendController&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# åç«¯æ§åˆ¶å™¨</p>\r\n<p>FrontendRestController&nbsp; &nbsp;# å‰ç«¯rest apiæ§åˆ¶å™¨</p>\r\n<p>BackendRestController&nbsp; &nbsp; # åç«¯resst apiæ§åˆ¶å™¨</p>\r\n<p>&nbsp;</p>\r\n<p>ç¤ºä¾‹ï¼š</p>\r\n<pre><code><!--?php</code--><br /><br /><code>declare(strict_types=1);</code><br /><br /><code>/*</code><br /><code> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code> * é‚®ç®±ï¼šaiweline@qq.com</code><br /><code> * ç½‘å€ï¼šaiweline.com</code><br /><code> * è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code> */</code><br /><br /><code>namespace Aiweline\\Index\\Controller;</code><br /><br /><code>use Weline\\Framework\\App\\Controller\\FrontendController;</code><br /><br /><code>class Upload extends FrontendController</code><br /><code>{</code><br /><code>    public function index()</code><br /><code>    {</code><br /><code>        return $this-&gt;fetch();</code><br /><code>    }</code><br /><code>}</code><br /><br />æ‰§è¡Œ php bin/m module:upgrade<br /><br />éªŒè¯ï¼š<br /><img src=\"../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/æ§åˆ¶å™¨éªŒè¯.png\" alt=\"\" width=\"3323\" height=\"1337\" /><br /><br /><br /><strong><span style=\"color: #ff0000;\">é«˜çº§æ§åˆ¶å™¨ç©æ³•ï¼š</span></strong><br /><br />å½“ä½ æœ‰å¾ˆå¤šä»£ç å†—ä½™ï¼Œæˆ–è€…éœ€è¦åˆå§‹åŒ–æ§åˆ¶å™¨çš„ä¸€äº›è¡Œä¸ºï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªBaseController,ç»§æ‰¿ä»¥ä¸Šçˆ¶æ§åˆ¶å™¨ï¼Œç„¶åå†é€šè¿‡å­æ§åˆ¶å™¨ç±»å®ç°ã€‚ä¸‹é¢æ˜¯ä¾‹å­ï¼š<br />æ¯”å¦‚åœ¨Weline_Adminæ¨¡å—ä¸­ï¼Œä½¿ç”¨äº†ç±»ä¼¼çš„åŠŸèƒ½ã€‚<br /><br /><img src=\"../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/Baseæ§åˆ¶å™¨ç›®å½•.png\" alt=\"\" width=\"533\" height=\"222\" /><br />BaseControlleræ§åˆ¶å™¨å†…æŒ‡å®šäº†æ¨¡æ¿ä¸ºhtmlæ ¼å¼ï¼Œï¼ˆé»˜è®¤æ˜¯phtmlï¼‰</code></pre>\r\n<pre><code><!--?php</code--><br /><br /><code>declare(strict_types=1);</code><br /><br /><code>/*</code><br /><code> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code> * é‚®ç®±ï¼šaiweline@qq.com</code><br /><code> * ç½‘å€ï¼šaiweline.com</code><br /><code> * è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code> */</code><br /><br /><code>namespace Weline\\Admin\\Controller\\Template;</code><br /><br /><code>class BaseController extends \\Weline\\Admin\\Controller\\BaseController</code><br /><code>{</code><br /><code>    public function __init()</code><br /><code>    {</code><br /><code>        # è®¾ç½®æ¨¡æ¿æ–‡ä»¶ä¸ºhtml</code><br /><code>        $this-&gt;getTemplate()-&gt;setFileExt(\'html\');</code><br /><code>        parent::__init();</code><br /><code>    }</code><br /><code>}</code></code></pre>\r\n<pre><br /><br />çœ‹ä¸‹Upzet.phpï¼Œç»§æ‰¿äº†è¿™ä¸ªBaseContrlleræ§åˆ¶å™¨ã€‚</pre>\r\n<pre><code><!--?php</code--><br /><br /><code>declare(strict_types=1);</code><br /><br /><code>/*</code><br /><code> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code> * é‚®ç®±ï¼šaiweline@qq.com</code><br /><code> * ç½‘å€ï¼šaiweline.com</code><br /><code> * è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code> */</code><br /><br /><code>namespace Weline\\Admin\\Controller\\Template;</code><br /><br /><code>class Upzet extends BaseController</code><br /><code>{</code><br /><code>    public function index()</code><br /><code>    {</code><br /><code>        return $this-&gt;fetch($this-&gt;_request-&gt;getRule(\'template\'));</code><br /><code>    }</code><br /><code>}</code><br /><br /><span style=\"color: #e03e2d;\">å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç©æ³•åªæ˜¯æŠŠæ¨¡æ¿æ–‡ä»¶æ ¼å¼æ‹“å±•åæ¢äº†ä¸€ä¸‹ã€‚</span></code></pre>', '2022-05-08 16:38:13', '2022-05-08 17:49:28');
INSERT INTO `m_document` VALUES (9, 6, 'æ¨¡ç»„å®‰è£…ï¼Œå‡çº§ï¼Œå¸è½½æ—¶å¤„ç†æ•°æ®', 'WelineFrameworkæ¡†æ¶æ€æ ·åœ¨æ¨¡ç»„å®‰è£…ï¼Œå‡çº§ï¼Œå¸è½½æ—¶å¤„ç†æ•°æ®ï¼Ÿ', 1, '<p>Frameworkæ¡†æ¶æ€æ ·åœ¨æ¨¡ç»„å®‰è£…ï¼Œå‡çº§ï¼Œå¸è½½æ—¶å¤„ç†æ•°æ®ï¼Ÿ</p>\r\n<p>æ¡†æ¶æ”¯æŒåœ¨å®‰è£…è¿‡ç¨‹ä¸­åˆå§‹åŒ–æ•°æ®ï¼Œä»¥åŠåœ¨æ¨¡å—å‡çº§çš„æ—¶å€™å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚æ¯”å¦‚å®‰è£…æ¨¡ç»„çš„æ—¶å€™éœ€è¦å®‰è£…æ•°æ®åº“è¡¨ï¼Œå‡çº§æ—¶åˆéœ€è¦å¯¹æ¨¡å—çš„æ•°æ®è¿›è¡Œè¿ç§»æ•´æ”¹ç­‰ã€‚æ‰€ä»¥ï¼Œæ­£å¯¹æ­¤é—®é¢˜ï¼Œæ¡†æ¶è§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p>\r\n<p>æ¨¡ç»„Moduleç›®å½•ä¸‹çš„setupç›®å½•æ˜¯ä¸“é—¨å¤„ç†è¿™ä¸‰ä¸ªé—®é¢˜çš„ç›®å½•ï¼Œåˆ†åˆ«æœ‰Install,Upgrade,Removeä¸‰ä¸ªæ–‡ä»¶ã€‚</p>\r\n<p><img src=\"../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/setup.png\" alt=\"\" width=\"620\" height=\"383\" /></p>\r\n<p>æ–‡ä»¶åæ˜¯å›ºå®šçš„ï¼Œå¯ä»¥ä¸å†™ã€‚</p>\r\n<p>Install,Upgrade,Removeä¸‰ä¸ªæ–‡ä»¶æ–‡ä»¶åˆ†åˆ«ç»§æ‰¿PHP æ¥å£ç±»Weline\\Framework\\Setup\\InstallInterface,Weline\\Framework\\Setup\\UpgradeInterface,Weline\\Framework\\Setup\\RemoveInterface.</p>\r\n<p><span style=\"color: #e03e2d;\">é‡è¦æç¤ºï¼šInstallåœ¨é¦–æ¬¡å®‰è£…æ—¶æ‰æ‰§è¡Œï¼ŒUpgradeåœ¨æ¨¡ç»„å‡çº§ç‰ˆæœ¬çš„æ—¶å€™ä¼šè¢«è§¦å‘ï¼ŒRemoveåœ¨æ¨¡å—å¸è½½æ—¶ä¼šè§¦å‘ã€‚</span></p>\r\n<p>å…¶ä¸­å‚æ•°å·²åœ¨æ¥å£æ–¹æ³•ä¸­ç»™å‡ºï¼Œå‚æ•°$setupå¯ä»¥æ“ä½œæ•°æ®åº“ï¼Œè·å–æ‰“å°ç±»ç­‰ï¼Œ$contextæ˜¯ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥åˆ¤æ–­æ¨¡ç»„Moduleçš„ç‰ˆæœ¬ä¿¡æ¯ç­‰ã€‚</p>\r\n<p>å…¶ä½™é€»è¾‘è‡ªè¡Œæ“ä½œã€‚</p>\r\n<p>&nbsp;</p>\r\n<p><strong><span style=\"color: #e03e2d;\">é«˜çº§åšæ³•ï¼š</span></strong></p>\r\n<p>å¯ä»¥åœ¨Modelä¸­ç›´æ¥è¿›è¡Œæ•°æ®åº“åˆ›å»ºã€‚</p>\r\n<p>è¿™ä¸ªåœ¨æ¨¡å‹Modelä¸­ä¼šç»™åˆ°ï¼Œè¿™é‡Œåªè¯´æ˜ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨ã€‚</p>\r\n<p>Moduleæ¨¡å‹çš„Modelç›®å½•ä¸‹æ˜¯æ•°æ®æ¨¡å‹ï¼Œç»§æ‰¿Weline\\Framework\\Database\\Modelç±»ï¼Œåˆ™å¯ä»¥å®ç°install,setup,upgradeä¸‰ä¸ªå‡½æ•°</p>\r\n<p><span style=\"color: #e03e2d;\">é‡è¦æç¤ºï¼šinstallåœ¨é¦–æ¬¡å®‰è£…æ—¶æ‰æ‰§è¡Œï¼Œsetupå¦‚æœåœ¨å¼€å‘æ¨¡å¼ä¸‹æ¯æ¬¡æ‰§è¡Œphp bin/m module:upgradeéƒ½ä¼šè§¦å‘ï¼ˆéå¼€å‘æ¨¡å¼ä¸‹å¹¶ä¸ä¼šè§¦å‘ï¼‰ï¼Œupgradeåœ¨æ¨¡ç»„å‡çº§ç‰ˆæœ¬çš„æ—¶å€™ä¼šè¢«è§¦å‘ã€‚</span></p>\r\n<p>ä½¿ç”¨isntallæ¥ä¸¾ä¸ªä¾‹å­ï¼ˆå®‰è£…çš„æ—¶å€™åˆ›å»ºè¡¨ï¼‰ï¼š</p>\r\n<pre><code>/**</code><br /><code> * @inheritDoc</code><br /><code> */</code><br /><code>public function install(ModelSetup $setup, Context $context): void</code><br /><code>{</code><br /><code>    if (!$setup-&gt;tableExist()) {</code><br /><code>        $setup-&gt;createTable(\'ç®¡ç†å‘˜è¡¨\')</code><br /><code>              -&gt;addColumn(self::fields_ID, TableInterface::column_type_INTEGER, 0, \'auto_increment primary key\', \'ç”¨æˆ·ID\')</code><br /><code>              -&gt;addColumn(self::fields_username, TableInterface::column_type_VARCHAR, 60, \'\', \'ç”¨æˆ·å\')</code><br /><code>              -&gt;addColumn(self::fields_password, TableInterface::column_type_VARCHAR, 255, \'\', \'å¯†ç \')</code><br /><code>              -&gt;addColumn(self::fields_avatar, TableInterface::column_type_VARCHAR, 255, \'\', \'å¤´åƒ\')</code><br /><code>              -&gt;addColumn(self::fields_login_ip, TableInterface::column_type_VARCHAR, 16, \'\', \'ç™»å½•IP\')</code><br /><code>              -&gt;addColumn(self::fields_sess_id, TableInterface::column_type_VARCHAR, 32, \'\', \'ç®¡ç†å‘˜Session ID\')</code><br /><code>              -&gt;addColumn(self::fields_attempt_times, TableInterface::column_type_INTEGER, 0, \'default 0\', \'å°è¯•ç™»å½•æ¬¡æ•°\')</code><br /><code>              -&gt;addColumn(self::fields_attempt_ip, TableInterface::column_type_VARCHAR, 16, \'\', \'å°è¯•ç™»å½•IP\')</code><br /><code>              -&gt;create();</code><br /><br /><code>        # åˆå§‹åŒ–ä¸€ä¸ªè´¦æˆ·</code><br /><code>        /**@var AdminUser $adminUser */</code><br /><code>        $adminUser = ObjectManager::getInstance(AdminUser::class);</code><br /><code>        $adminUser-&gt;setUsername(\'ç§‹æ«é›é£\')-&gt;setPassword(\'admin\')-&gt;save();</code><br /><code>    }</code><br /><code>}</code><br /><br /><br />æ¸©é¦¨æç¤ºï¼šå¯ä»¥ä½¿ç”¨setupåœ¨å¼€å‘æ¨¡å¼ä¸‹æµ‹è¯•åˆ›å»ºè¡¨æ¥éªŒè¯è¡¨çš„æ­£ç¡®æ€§ã€‚<br />ç¤ºä¾‹ï¼ˆåˆ é™¤é‡å»ºï¼‰ï¼š</pre>\r\n<pre><code>    /**</code><br /><code>     * @inheritDoc</code><br /><code>     */</code><br /><code>    public function setup(ModelSetup $setup, Context $context): void</code><br /><code>    {</code><br /><code>//        $setup-&gt;dropTable();</code><br /><code>//        $this-&gt;install($setup, $context);</code><br /><code>    }</code><br /><br /><br /></pre>', '2022-05-08 17:19:29', '2022-05-08 17:21:38');
INSERT INTO `m_document` VALUES (10, 8, 'åˆ›å»º', 'WelineFrameworkæ€æ ·åˆ›å»ºæ•°æ®æ¨¡å‹Model?', 1, '<p>ğŸ˜‡</p>\r\n<p>Modelç›®å½•ä¸‹åˆ›å»ºç±»ç»§æ‰¿</p>\r\n<pre>\\Weline\\Framework\\Database\\Model</pre>\r\n<p>ç¤ºä¾‹ï¼š</p>\r\n<pre><!--?php<br /--><br />declare(strict_types=1);<br /><br />/*<br /> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚<br /> * é‚®ç®±ï¼šaiweline@qq.com<br /> * ç½‘å€ï¼šaiweline.com<br /> * è®ºå›ï¼šhttps://bbs.aiweline.com<br /> */<br /><br />namespace Weline\\DeveloperWorkspace\\Model;<br /><br />use Weline\\Framework\\Database\\Api\\Db\\TableInterface;<br />use Weline\\Framework\\Http\\Url;<br />use Weline\\Framework\\Manager\\ObjectManager;<br />use Weline\\Framework\\Setup\\Data\\Context;<br />use Weline\\Framework\\Setup\\Db\\ModelSetup;<br /><br />class Document extends \\Weline\\Framework\\Database\\Model<br />{<br />    public const fields_ID          = \'id\';<br />    public const fields_TITLE       = \'title\';<br />    public const fields_summary     = \'summary\';<br />    public const fields_AUTHOR_ID   = \'author_id\';<br />    public const fields_CATEGORY_ID = \'category_id\';<br />//    public const fields_TAG_ID      = \'tag_id\';<br />    public const fields_CONTEND = \'content\';<br /><br />    /**<br />     * @inheritDoc<br />     */<br />    public function setup(ModelSetup $setup, Context $context): void<br />    {<br />//        $setup-&gt;dropTable();<br />        $this-&gt;install($setup, $context);<br />    }<br /><br />    /**<br />     * @inheritDoc<br />     */<br />    public function upgrade(ModelSetup $setup, Context $context): void<br />    {<br />        // TODO: Implement upgrade() method.<br />    }<br /><br />    /**<br />     * @inheritDoc<br />     */<br />    public function install(ModelSetup $setup, Context $context): void<br />    {<br />        $setup-&gt;getPrinting()-&gt;setup(\'å®‰è£…æ•°æ®è¡¨...\', $setup-&gt;getTable());<br />//        $setup-&gt;dropTable();<br />        if (!$setup-&gt;tableExist()) {<br />            $setup-&gt;createTable(\'å¼€å‘æ–‡ç« \')<br />                  -&gt;addColumn(self::fields_ID, TableInterface::column_type_INTEGER, 0, \'primary key auto_increment \', \'ID\')<br />                  -&gt;addColumn(self::fields_CATEGORY_ID, TableInterface::column_type_INTEGER, 0, \'not null \', \'åˆ†ç±»ID\')<br />                  -&gt;addColumn(self::fields_TITLE, TableInterface::column_type_VARCHAR, 120, \'not null\', \'æ ‡é¢˜\')<br />                  -&gt;addColumn(self::fields_summary, TableInterface::column_type_VARCHAR, 250, \'not null\', \'æ‘˜è¦\')<br />                  -&gt;addColumn(self::fields_AUTHOR_ID, TableInterface::column_type_INTEGER, 0, \'default 0\', \'ä½œè€…ID\')<br />                  -&gt;addColumn(self::fields_CONTEND, TableInterface::column_type_TEXT, 0, \'not null\', \'å†…å®¹\')<br />                  -&gt;create();<br />        } else {<br />            $setup-&gt;getPrinting()-&gt;setup(\'è·³è¿‡å®‰è£…æ•°æ®è¡¨...\', $setup-&gt;getTable());<br />        }<br />    }<br /><br />    public function getTitle()<br />    {<br />        return $this-&gt;getData(self::fields_TITLE);<br />    }<br /><br />    public function setTitle(string $title): Document<br />    {<br />        return $this-&gt;setData(self::fields_TITLE, $title);<br />    }<br /><br />    public function getAuthorId()<br />    {<br />        return $this-&gt;getData(self::fields_AUTHOR_ID);<br />    }<br /><br />    public function setAuthorID(string|int $author_id): Document<br />    {<br />        return $this-&gt;setData(self::fields_AUTHOR_ID, $author_id);<br />    }<br /><br />//    public function getTagId()<br />//    {<br />//        return $this-&gt;getData(self::fields_TAG_ID);<br />//    }<br />//<br />//    public function setTagID(string|int $tag_id): Document<br />//    {<br />//        return $this-&gt;setData(self::fields_TAG_ID, $tag_id);<br />//    }<br /><br />    public function getContent()<br />    {<br />        return $this-&gt;getData(self::fields_CONTEND);<br />    }<br /><br />    public function setContent(string $content): Document<br />    {<br />        return $this-&gt;setData(self::fields_CONTEND, $content);<br />    }<br /><br />    public function setCategoryId(string $category_id): Document<br />    {<br />        return $this-&gt;setData(self::fields_CATEGORY_ID, $category_id);<br />    }<br /><br />    public function getCategoryId()<br />    {<br />        return $this-&gt;getData(self::fields_CATEGORY_ID);<br />    }<br /><br />    public function getUrl()<br />    {<br />        /**@var Url $url */<br />        $url = ObjectManager::getInstance(Url::class);<br />        return $url-&gt;build(\'/dev/tool/document\', [\'id\' =&gt; $this-&gt;getId()]);<br />    }<br /><br />    /**<br />     * @DESC          # æ–¹æ³•æè¿°<br />     *<br />     * @AUTH    ç§‹æ«é›é£<br />     * @EMAIL aiweline@qq.com<br />     * @DateTime: 2022/4/19 22:36<br />     * å‚æ•°åŒºï¼š<br />     *<br />     * @param int $id<br />     *<br />     * @return Document[]<br />     */<br />    public function loadByCatalogId(int $id): array<br />    {<br />        return $this-&gt;where(self::fields_CATEGORY_ID, $id)-&gt;select()-&gt;fetch();<br />    }<br />}</pre>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>', '2022-05-08 17:27:25', '2022-05-08 17:31:00');
INSERT INTO `m_document` VALUES (11, 8, 'ä½¿ç”¨', 'WelineFrameworkæ¡†æ¶æ¨¡å‹å¦‚ä½•ä½¿ç”¨ï¼Ÿ', 1, '<p>æ¨¡å‹ä½¿ç”¨ï¼š</p>\r\n<p><span style=\"color: #e03e2d;\">loadå‡½æ•°ï¼š</span></p>\r\n<pre>public function index()<br />{<br />    /**@var \\Weline\\DeveloperWorkspace\\Model\\Document $document*/<br />    $document = ObjectManager::getInstance(\\Weline\\DeveloperWorkspace\\Model\\Document::class);<br />    $this-&gt;assign(\'document\', $document-&gt;load($this-&gt;_request-&gt;getParam(\'id\')));<br />    return $this-&gt;fetch();<br />}</pre>\r\n<p>è¿™ä¸ªå‡½æ•°åŠ è½½è¿™ä¸ªæ¨¡å‹çš„ä¸»é”®æŸ¥è¯¢è¿™ä¸ªæ•°æ®ã€‚</p>\r\n<p>è¯´æ˜ï¼š\\Weline\\DeveloperWorkspace\\Model\\Documentè¿™ä¸ªæ˜¯æ–‡æ¡£æ¨¡å‹ï¼ŒloadåŠ è½½äº†æ–‡æ¡£\\Weline\\DeveloperWorkspace\\Model\\Documentæ¨¡å‹ä¸­æŒ‡å®šçš„ä¸»é”®</p>\r\n<p>ä»¥ä¸‹æ˜¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼š</p>\r\n<pre>&lt;?php<br /><br />declare(strict_types=1);<br /><br />/*<br /> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚<br /> * é‚®ç®±ï¼šaiweline@qq.com<br /> * ç½‘å€ï¼šaiweline.com<br /> * è®ºå›ï¼šhttps://bbs.aiweline.com<br /> */<br /><br />namespace Weline\\DeveloperWorkspace\\Model;<br /><br />use Weline\\Framework\\Database\\Api\\Db\\TableInterface;<br />use Weline\\Framework\\Http\\Url;<br />use Weline\\Framework\\Manager\\ObjectManager;<br />use Weline\\Framework\\Setup\\Data\\Context;<br />use Weline\\Framework\\Setup\\Db\\ModelSetup;<br /><br />class Document extends \\Weline\\Framework\\Database\\Model<br />{<br />    <span style=\"color: #e03e2d;\">public const fields_ID          = \'id\';</span><br />    public const fields_TITLE       = \'title\';<br />    public const fields_summary     = \'summary\';<br />    public const fields_AUTHOR_ID   = \'author_id\';<br />    public const fields_CATEGORY_ID = \'category_id\';<br />    .....</pre>\r\n<p>æˆ‘å·²ç»ç”¨çº¢è‰²æ–‡å­—æ ‡çº¢ï¼Œ<span style=\"color: #e03e2d;\">fields_ID</span>æ˜¯æ–‡æ¡£çš„ä¸»é”®å­—æ®µï¼Œå½“ä½ ä½¿ç”¨loadçš„æ—¶å€™ç›´æ¥å°±æ˜¯æŸ¥è¯¢è¿™ä¸ªå­—æ®µã€‚</p>\r\n<p>saveå‡½æ•°ï¼š</p>\r\n<p>è¿™ä¸ªå‡½æ•°å¯ä»¥ä¿å­˜æ•°æ®ä¹Ÿå¯ä»¥æ›´æ–°æ•°æ®ï¼Œä¸»è¦æ˜¯çœ‹å½“å‰æ¨¡å‹å®ä¾‹å¯¹è±¡ä¸­æ˜¯å¦æœ‰ä¸»é”®ï¼Œæœ‰ä¸»é”®åˆ™ç›´æ¥æ›´æ–°ï¼Œæ²¡æœ‰åˆ™saveä¼šæ–°å¢æ•°æ®ã€‚</p>\r\n<p>æ¥çœ‹ä¸€æ®µæ§åˆ¶å™¨ä¿å­˜æ•°æ®çš„ç¤ºä¾‹ä»£ç ï¼š</p>\r\n<pre>public function postPost()<br />{<br />    # ä¿å­˜<br />    /**@var \\Weline\\DeveloperWorkspace\\Model\\Document $documentModel */<br />    $documentModel = ObjectManager::getInstance(\\Weline\\DeveloperWorkspace\\Model\\Document::class);<br />    try {<br />        $pre_msg = __(\'æ·»åŠ \');<br />        if ($this-&gt;_request-&gt;getPost(\'id\')) {<br />            $pre_msg = __(\'ä¿®æ”¹\');<br />        }<br />        <span style=\"color: #e03e2d;\">$documentModel-&gt;save($this-&gt;_request-&gt;getPost());</span><br />        $this-&gt;getMessageManager()-&gt;addSuccess($pre_msg . \'æ–‡æ¡£æˆåŠŸï¼ID:\' . $documentModel-&gt;getId());<br />    } catch (\\Exception $exception) {<br />        $this-&gt;exception($exception);<br />    }<br />    $this-&gt;redirect($this-&gt;_url-&gt;build(\'dev/tool/admin/document\'));<br />}</pre>\r\n<p>ç›¸ä¿¡ä¸€çœ¼èƒ½åçœ‹æ˜ç™½ï¼Œå¦‚æœè¯·æ±‚çš„postä¸­æœ‰ä¸»é”®ï¼Œé‚£ä¹ˆsaveå°±æ˜¯æ›´æ–°äº†ï¼Œå¦‚æœæ²¡æœ‰å°±æ˜¯æ–°å¢ã€‚</p>\r\n<p>æŸ¥è¯¢ï¼š</p>\r\n<p>æ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>\r\n<pre>public function index()<br />{<br />    $documentModel = ModelService::getDocumentModel();<br />    <span style=\"color: #e03e2d;\">$documents     = $documentModel-&gt;joinModel(Catalog::class, \'<span style=\"color: #3598db;\">catalog</span>\', \'<span style=\"color: #3598db;\">main_table.category_id=catalog.id</span>\')</span><br /><span style=\"color: #e03e2d;\">                                   -&gt;fields(\'<span style=\"color: #3598db;\">main_table.*,main_table.id as doc_id,catalog.*,catalog.id as c_id,catalog.name as c_name</span>\')</span><br /><span style=\"color: #e03e2d;\">                                   -&gt;pagination(</span><br /><span style=\"color: #e03e2d;\">                                       intval($this-&gt;_request-&gt;getParam(\'page\', 1)),</span><br /><span style=\"color: #e03e2d;\">                                       intval($this-&gt;_request-&gt;getParam(\'pageSize\', 10)),</span><br /><span style=\"color: #e03e2d;\">                                       $this-&gt;_request-&gt;getParams()</span><br /><span style=\"color: #e03e2d;\">                                   )-&gt;select()-&gt;fetch();</span><br />    $this-&gt;assign(\'documents\', $documents);<br />    $this-&gt;assign(\'pagination\', $documentModel-&gt;getPagination());<br />    return $this-&gt;fetch();<br />}</pre>\r\n<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæŸ¥è¯¢ä¹Ÿå¾ˆç®€å•ï¼Œé“¾å¼æŸ¥è¯¢ï¼Œæ”¯æŒfind,load,where,join,selectç­‰ï¼Œå…·ä½“è¯·åœ¨</p>\r\n<pre>Weline\\Framework\\Database\\AbstractModel</pre>\r\n<p>å’Œ</p>\r\n<pre>Weline\\Framework\\Database\\Api\\Connection\\QueryInterface</pre>\r\n<p>ä¸­å‚è€ƒä½¿ç”¨æ–¹æ³•ã€‚</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>', '2022-05-08 17:48:01', '2022-05-08 17:48:01');
INSERT INTO `m_document` VALUES (12, 9, 'æ§åˆ¶å™¨ç±»è§„åˆ™', 'WelineFrameworkæ¡†æ¶æ§åˆ¶å™¨ç±»è§„åˆ™', 1, '<p>æ§åˆ¶å™¨ç»§æ‰¿ç±»åï¼Œæœ¬èº«ç±»å­˜åœ¨ä¸€äº›æ–¹æ³•è§„åˆ™ï¼š</p>\r\n<p>ç¤ºä¾‹ï¼š</p>\r\n<pre>&lt;?php<br /><br />declare(strict_types=1);<br /><br />/*<br /> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚<br /> * é‚®ç®±ï¼šaiweline@qq.com<br /> * ç½‘å€ï¼šaiweline.com<br /> * è®ºå›ï¼šhttps://bbs.aiweline.com<br /> */<br /><br />namespace Weline\\DeveloperWorkspace\\Controller;<br /><br />use Weline\\DeveloperWorkspace\\Helper\\Data;<br />use Weline\\Framework\\Manager\\ObjectManager;<br /><br />class Document extends \\Weline\\Framework\\App\\Controller\\FrontendController<br />{<br />    <span style=\"color: #e03e2d;\">public function index()</span><br />    {<br />        /**@var \\Weline\\DeveloperWorkspace\\Model\\Document $document*/<br />        $document = ObjectManager::getInstance(\\Weline\\DeveloperWorkspace\\Model\\Document::class);<br />        $this-&gt;assign(\'document\', $document-&gt;load($this-&gt;_request-&gt;getParam(\'id\')));<br />        return $this-&gt;fetch();<br />    }<br />}</pre>\r\n<p><span style=\"color: #e03e2d;\">è®¿é—®æ–¹æ³•é™åˆ¶ï¼š</span></p>\r\n<p>å¦‚æœä½ æƒ³indexä½¿ç”¨postè®¿é—®ï¼Œå¯ä»¥å°†çº¢è‰²éƒ¨åˆ†æ–¹æ³•åå†™æˆ<span style=\"color: #e03e2d;\">postIndex</span>ã€‚é»˜è®¤æ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚</p>\r\n<p>&nbsp;</p>', '2022-05-08 17:54:30', '2022-05-08 17:54:30');
INSERT INTO `m_document` VALUES (13, 10, 'ç±»', 'WelineFrameworkç±»è§„èŒƒ', 1, '<p>æ¡†æ¶ä¸­ç±»çš„è§„èŒƒã€‚</p>\r\n<p>__init()</p>\r\n<p>è¿™æ˜¯ä¸ªç±»åˆå§‹åŒ–å‡½æ•°ï¼Œç­‰åŒäº__construct()å‡½æ•°ï¼Œå¯å†™å¯ä¸å†™ï¼Œä½†æ˜¯<span style=\"color: #e03e2d;\">å¿…é¡»ä½¿ç”¨ObjectManger::getInstance()å®¹å™¨æ‰èƒ½è¯†åˆ«</span>ã€‚</p>\r\n<p>__construct()</p>\r\n<p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯ä»¥åˆå§‹åŒ–ç±»ã€‚</p>\r\n<p>ä¾‹å­ï¼ˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…çš„ä»£ç ï¼‰ï¼š</p>\r\n<pre>&lt;?php<br /><br />declare(strict_types=1);<br /><br />/*<br /> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚<br /> * é‚®ç®±ï¼šaiweline@qq.com<br /> * ç½‘å€ï¼šaiweline.com<br /> * è®ºå›ï¼šhttps://bbs.aiweline.com<br /> */<br /><br />namespace Weline\\Backend\\Observer;<br /><br />use Weline\\Backend\\Config\\MenuXmlReader;<br />use Weline\\Backend\\Model\\Menu;<br />use Weline\\Framework\\Event\\Event;<br /><br />class UpgradeMenu implements \\Weline\\Framework\\Event\\ObserverInterface<br />{<br /><span style=\"color: #e03e2d;\">    private \\Weline\\Backend\\Model\\Menu $menu;</span><br /><span style=\"color: #e03e2d;\">    private MenuXmlReader $menuReader;</span><br /><br /><span style=\"color: #e03e2d;\">    public function __construct(</span><br /><span style=\"color: #e03e2d;\">        \\Weline\\Backend\\Model\\Menu $menu,</span><br /><span style=\"color: #e03e2d;\">        MenuXmlReader $menuReader</span><br /><span style=\"color: #e03e2d;\">    ) {</span><br /><span style=\"color: #e03e2d;\">        $this-&gt;menu       = $menu;</span><br /><span style=\"color: #e03e2d;\">        $this-&gt;menuReader = $menuReader;</span><br /><span style=\"color: #e03e2d;\">    }</span><br /><br />    /**<br />     * @inheritDoc<br />     */<br />    public function execute(Event $event)<br />    {<br />        $modules_xml_menus = $this-&gt;menuReader-&gt;read();<br />        $this-&gt;menu-&gt;query(\'TRUNCATE TABLE \' . $this-&gt;menu-&gt;getTable());<br />        # å…ˆæ›´æ–°é¡¶å±‚èœå•<br />        foreach ($modules_xml_menus as $module =&gt; $menus) {<br />            foreach ($menus[\'data\'] as $key =&gt; $menu) {<br />                if (empty($menu[\'parent\'])) {<br />                    # æ¸…ç©ºæŸ¥è¯¢æ¡ä»¶<br />                    $this-&gt;menu-&gt;clearData();<br />                    $menu[Menu::fields_MODULE]        = $module;<br />                    $menu[Menu::fields_PARENT_SOURCE] = $menu[\'parent\'] ?? \'\';<br />                    unset($menu[\'parent\']);<br />                    # 1 å­˜åœ¨çˆ¶èµ„æº æ£€æŸ¥çˆ¶èµ„æºçš„ ID<br />                    if (isset($menu[Menu::fields_PARENT_SOURCE]) &amp;&amp; $parent = $menu[Menu::fields_PARENT_SOURCE]) {<br />                        $parent = $this-&gt;menu-&gt;where(Menu::fields_SOURCE, $parent)-&gt;find()-&gt;fetch();<br />                        if ($pid = $parent-&gt;getId()) {<br />                            $menu[Menu::fields_PID] = $pid;<br />                        } else {<br />                            $menu[Menu::fields_PID] = 0;<br />                        }<br />                    }<br />                    $menu[Menu::fields_PID] = $menu[Menu::fields_PID]??0;<br />                    # å…ˆæŸ¥è¯¢ä¸€é<br />                    /**@var Menu $menuModel */<br />                    $this-&gt;menu-&gt;clearData();<br />                    $menuModel = $this-&gt;menu-&gt;where(Menu::fields_NAME, $menu[Menu::fields_NAME])-&gt;find()-&gt;fetch();<br />                    # ä¿å­˜æ—¶æ£€æµ‹æŸ¥è¯¢æ•°æ®ï¼Œå­˜åœ¨åˆ™æ›´æ–°<br />                    if ($menuModel-&gt;getId()) {<br />                        $menu[Menu::fields_ID] = $menuModel-&gt;getId();<br />                    }<br />                    $menuModel-&gt;clearData();<br />                    $result = $menuModel-&gt;setData($menu)-&gt;forceCheck(true)-&gt;save();<br />                    # 2 æ£€æŸ¥è‡ªèº«æ˜¯å¦è¢«åˆ«çš„æ¨¡å—ä½œä¸ºçˆ¶åˆ†ç±»<br />                    $menuModel-&gt;clearData();<br />                    if ($this_menu_id = $menuModel-&gt;getId() &amp;&amp; $is_others_parent = $menuModel-&gt;where(Menu::fields_PARENT_SOURCE, $menu[Menu::fields_SOURCE])-&gt;select()-&gt;fetch()) {<br />                        foreach ($is_others_parent as $other_menu) {<br />                            if (empty($other_menu[\'pid\'])) {<br />                                $other_menu[\'pid\'] = $this_menu_id;<br /><br />                                $menuModel-&gt;forceCheck(false)-&gt;setData(Menu::fields_ID, $other_menu[\'id\'])-&gt;save($other_menu);<br />                            }<br />                        }<br />                    }<br />                    unset($menus[\'data\'][$key]);<br />                }<br />            }<br />        }<br />        foreach ($modules_xml_menus as $module =&gt; $menus) {<br />            foreach ($menus[\'data\'] as $menu) {<br />                # æ¸…ç©ºæŸ¥è¯¢æ¡ä»¶<br />                $this-&gt;menu-&gt;clearData();<br />                $menu[Menu::fields_MODULE]        = $module;<br />                $menu[Menu::fields_PARENT_SOURCE] = $menu[\'parent\'] ?? \'\';<br />                unset($menu[\'parent\']);<br />                # 1 å­˜åœ¨çˆ¶èµ„æº æ£€æŸ¥çˆ¶èµ„æºçš„ ID<br />                if (isset($menu[Menu::fields_PARENT_SOURCE]) &amp;&amp; $parent = $menu[Menu::fields_PARENT_SOURCE]) {<br />                    $parent = $this-&gt;menu-&gt;where(Menu::fields_SOURCE, $parent)-&gt;find()-&gt;fetch();<br />                    if ($pid = $parent-&gt;getData(\'id\')) {<br />                        $menu[Menu::fields_PID] = $pid;<br />                    } else {<br />                        $menu[Menu::fields_PID] = 0;<br />                    }<br />                }<br />                $menu[Menu::fields_PID] = $menu[Menu::fields_PID]??0;<br />                $result = $menuModel-&gt;setData($menu)-&gt;forceCheck(true)-&gt;save();<br />                # 2 æ£€æŸ¥è‡ªèº«æ˜¯å¦è¢«åˆ«çš„æ¨¡å—ä½œä¸ºçˆ¶åˆ†ç±»<br />                $menuModel-&gt;clearData();<br />                if ($this_menu_id = $menuModel-&gt;getId() &amp;&amp; $is_others_parent = $menuModel-&gt;where(Menu::fields_PARENT_SOURCE, $menu[Menu::fields_SOURCE])-&gt;select()-&gt;fetch()) {<br />                    foreach ($is_others_parent as $other_menu) {<br />                        if (empty($other_menu[\'pid\'])) {<br />                            $other_menu[\'pid\'] = $this_menu_id;<br />                            $menuModel-&gt;forceCheck(false)-&gt;setData(Menu::fields_ID, $other_menu[\'id\'])-&gt;save($other_menu);<br />                        }<br />                    }<br />                }<br />            }<br />        }<br />    }<br />}</pre>\r\n<p>è¿™ä¸ªç±»çš„çº¢è‰²æ ‡æ³¨éƒ¨åˆ†å¯ä»¥çœ‹åˆ°è¿™ç§ç”¨æ³•ï¼ŒåŒæ ·<span style=\"color: #e03e2d;\">å¿…é¡»ä½¿ç”¨ObjectManger::getInstance()å®¹å™¨æ‰èƒ½è¯†åˆ«</span>,å¦åˆ™ä¼šæŠ¥é”™ã€‚</p>', '2022-05-08 18:02:15', '2022-05-08 18:02:15');
INSERT INTO `m_document` VALUES (14, 6, 'ç¼“å­˜', 'WelineFrameworkæ¡†æ¶æ€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ', 1, '<p>åœ¨æ¨¡ç»„çš„ç›®å½•ä¸‹åˆ›å»ºCacheç›®å½•ã€‚</p>\r\n<p>Cacheç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿</p>\r\n<pre>\\Weline\\Framework\\Cache\\CacheFactory</pre>\r\n<p>ç¤ºä¾‹ï¼š</p>\r\n<pre><code>&lt;?php</code><br /><br /><code>/*</code><br /><code> * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚</code><br /><code> * é‚®ç®±ï¼šaiweline@qq.com</code><br /><code> * ç½‘å€ï¼šaiweline.com</code><br /><code> * è®ºå›ï¼šhttps://bbs.aiweline.com</code><br /><code> */</code><br /><br /><code>namespace Weline\\Framework\\Event\\Cache;</code><br /><br /><code>/**</code><br /><code> * æ–‡ä»¶ä¿¡æ¯</code><br /><code> * DESC:   |</code><br /><code> * ä½œè€…ï¼š   ç§‹æ«é›é£</code><br /><code> * æ—¥æœŸï¼š   2021/1/24</code><br /><code> * æ—¶é—´ï¼š   15:16</code><br /><code> * ç½‘ç«™ï¼š   https://bbs.aiweline.com</code><br /><code> * Emailï¼š  aiweline@qq.com</code><br /><code> * @DESC:    æ­¤æ–‡ä»¶æºç ç”±Aiwelineï¼ˆç§‹æ«é›é£ï¼‰å¼€å‘ï¼Œè¯·å‹¿éšæ„ä¿®æ”¹æºç ï¼</code><br /><code> * @SuppressWarnings(PHPMD.NumberOfChildren)</code><br /><code> * @since 1.2</code><br /><code> *</code><br /><code> * Class EventCache</code><br /><code> * @package Weline\\Framework\\Event\\Cache</code><br /><code> * @since 100</code><br /><code> */</code><br /><code>class EventCache extends \\Weline\\Framework\\Cache\\CacheFactory</code><br /><code>{</code><br /><code>    public function __construct(string $identity = \'framework_event\')</code><br /><code>    {</code><br /><code>        parent::__construct($identity, \'äº‹ä»¶ç¼“å­˜\', true);</code><br /><code>    }</code><br /><code>}</code></pre>\r\n<p>__construct()å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç¼“å­˜è¯†åˆ«å‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç¼“å­˜æ³¨é‡Šï¼ˆå¯é€‰ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ˜¯å¦æŒä¹…åŒ–ï¼ˆå¯é€‰ï¼Œå¦‚æœé€‰æ‹©éœ€è¦æŒä¹…åŒ–ï¼štrue,é‚£ä¹ˆä½¿ç”¨å‘½ä»¤php bin/m cache:cleanéœ€è¦åŠ -få¼ºåˆ¶æ¸…ç†æ‰èƒ½æ¸…ç†ã€‚ä¹Ÿå°±æ˜¯ï¼šphp bin/m cache:clean -fï¼‰</p>\r\n<p>&nbsp;</p>', '2022-05-09 21:48:57', '2022-05-09 21:48:57');
INSERT INTO `m_document` VALUES (15, 11, 'äº‹ä»¶è¯´æ˜åŠå…¶ä½œç”¨', 'ä»€ä¹ˆæ˜¯WelineFrameworkæ¡†æ¶ä¸­çš„äº‹ä»¶ï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ', 1, '<p>ä»€ä¹ˆæ˜¯WelineFrameworkæ¡†æ¶ä¸­çš„äº‹ä»¶ï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</p>\r\n<p>äº‹ä»¶ï¼š</p>\r\n<p>å°±æ˜¯ä¸€æ®µè¿è¡Œçš„ä»£ç ä¸­æ”¾äº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œå½“ä»£ç è¿è¡Œåˆ°è¿™ä¸ªåœ°æ–¹çš„æ—¶å€™ä¼šè§¦å‘ç›‘å¬å™¨ï¼Œç„¶åæŠŠèµ„æ–™æ€»åˆ°äº‹ä»¶å¤„ç†å™¨ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶æœ‰äººç›‘å¬ï¼Œé‚£ä¹ˆä¹…ä½¿ç”¨è¿™äº›æ•°æ®æäº›ä»€ä¹ˆäº‹æƒ…ã€‚è‡³äºæä»€ä¹ˆï¼Œå°±çœ‹è¿™ä¸ªç›‘å¬çš„äººåœ¨æƒ³ä»€ä¹ˆäº†ã€‚</p>\r\n<p>æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</p>\r\n<p>å½“ç„¶æ˜¯èƒ½å¤Ÿè®©ä½ åœ¨ä¸ç”¨å»ä¿®æ”¹æºç çš„æƒ…å†µä¸‹èƒ½å¤Ÿä¿®æ”¹æ•°æ®å•Šã€‚</p>', '2022-05-09 22:20:53', '2022-05-09 22:20:53');
INSERT INTO `m_document` VALUES (16, 11, 'å£°æ˜ä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œåˆ›é€ ä¸€ä¸ªäº‹ä»¶', 'æ€æ ·åœ¨WelineFrameworkæ¡†æ¶ä¸­å£°æ˜ä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Ÿå’Œåˆ›é€ ä¸€ä¸ªäº‹ä»¶ä¾›ç»™å…¶ä»–äººè°ƒç”¨ã€‚', 1, '&lt;h1 style=&quot;color: #ff0000;&quot;&gt;&lt;strong&gt;å£°æ˜äº‹ä»¶å‰æï¼š&lt;/strong&gt;&lt;/h1&gt;\r\n&lt;p&gt;å› ä¸ºä½ è§‰å¾—è¿™ä¸ªæ•°æ®å¯èƒ½åˆ«äººä¼šç”¨åˆ°ï¼Œå¹¶ä¸”ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä½ éœ€è¦ç»™åˆ«äººç•™ä¸ªä¿®æ”¹æ•°æ®æˆ–è€…åˆ©ç”¨æ•°æ®å¹²ç‚¹ä»€ä¹ˆï¼ˆè‡ªç”±å‘æŒ¥ï¼‰çš„æœºä¼šï¼Œå¦‚æœä¸æƒ³ç•™å°±åˆ«å£°æ˜äº†ã€‚&lt;/p&gt;\r\n&lt;h1 style=&quot;color: #ff0000;&quot;&gt;&lt;strong&gt;å¦‚ä½•ç”³æ˜ï¼š&lt;/strong&gt;&lt;/h1&gt;\r\n&lt;p&gt;&lt;img src=&quot;../../../../../pub/media/wyswyg/Weline/DeveloperWorkspace/document/äº‹ä»¶ç”³æ˜æ–‡ä»¶.png&quot; alt=&quot;&quot; width=&quot;602&quot; height=&quot;457&quot; /&gt;&lt;/p&gt;\r\n&lt;p&gt;å’Œä¸Šå›¾ä¸­æ‰€æ˜¾ç¤ºé‚£æ ·ï¼Œåœ¨etcç›®å½•ä¸‹é¢ï¼Œå†™ä¸ªevent.xmlæ–‡ä»¶ã€‚etc/event.xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;&amp;lt;config xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;        xs:noNamespaceSchemaLocation=&quot;urn:Weline_Framework::Event/etc/xsd/event.xsd&quot;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;        xmlns=&quot;urn:Weline_Framework::Event/etc/xsd/event.xsd&quot;&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;    &amp;lt;event name=&quot;Framework_Module::module_upgrade&quot;&amp;gt;&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;        &amp;lt;observer name=&quot;Weline_Backend::menu_upgrade&quot; instance=&quot;Weline\\Backend\\Observer\\UpgradeMenu&quot; disabled=&quot;false&quot; shared=&quot;true&quot;/&amp;gt;&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;    &amp;lt;/event&amp;gt;&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;code&gt;    &amp;lt;event name=&quot;Framework_Resource::compiler&quot;&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;        &amp;lt;observer name=&quot;Weline_Backend::compiler&quot; instance=&quot;Weline\\Backend\\Observer\\Compiler&quot; disabled=&quot;false&quot; shared=&quot;true&quot;/&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    &amp;lt;/event&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    &amp;lt;event name=&quot;Framework_View::header&quot;&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;        &amp;lt;observer name=&quot;Weline_Backend::header&quot; instance=&quot;Weline\\Backend\\Observer\\Header&quot; disabled=&quot;false&quot; shared=&quot;true&quot;/&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    &amp;lt;/event&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    &amp;lt;event name=&quot;Framework_View::footer&quot;&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;        &amp;lt;observer name=&quot;Weline_Backend::footer&quot; instance=&quot;Weline\\Backend\\Observer\\Footer&quot; disabled=&quot;false&quot; shared=&quot;true&quot;/&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    &amp;lt;/event&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;&amp;lt;/config&amp;gt;&lt;/code&gt;&lt;/pre&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;!--?xml version=&quot;1.0&quot;?--&gt;\r\n&lt;p&gt;çœ‹åˆ°çº¢è‰²çš„æ–‡å­—æ²¡ï¼Œé‚£å°±æ˜¯å‘Šè¯‰Eventäº‹ä»¶ç®¡ç†å™¨ï¼Œæˆ‘è¦æ¥å—Framework_Module::module_upgradeè¿™ä¸ªäº‹ä»¶ã€‚&lt;/p&gt;\r\n&lt;p&gt;name&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;# æˆ‘è¦æ¥å—çš„äº‹ä»¶åå­—&lt;/p&gt;\r\n&lt;p&gt;observer&amp;nbsp; &amp;nbsp; # è§‚å¯Ÿè€…,ä¸€æ ·ï¼šnameæ˜¯è§‚å¯Ÿè€…çš„åå­—ï¼Œè‡ªå·±éšä¾¿å–ä¸€ä¸ªï¼Œinstanceæ˜¯è§‚å¯Ÿè€…ç±»ï¼Œè§‚å¯Ÿåˆ°ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œè¦å¹²äº‹çš„é‚£ä¸ªç±»ï¼Œè§‚å¯Ÿè€…å¯ä»¥ä¸åªæ˜¯ä¸€ä¸ªå–”ï¼Œå¯ä»¥ä¸€èµ·åˆ†äº«ï¼Œæœ‰å‡ ä¸ªå°±å†™å‡ ä¸ªobserver&lt;/p&gt;\r\n&lt;p&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;åŒæ ·çš„ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œé™¤äº†çº¢è‰²éƒ¨åˆ†ï¼Œè¿˜å¯ä»¥ç”³è¯·å¾ˆå¤šä¸ªäº‹ä»¶ï¼Œæ¯ä¸ªäº‹ä»¶åˆå¯ä»¥æœ‰å¾ˆå¤šè§‚å¯Ÿè€…ã€‚&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;ä½ å¯èƒ½ä¼šé—®Framework_Module::module_upgradeè¿™ä¸ªäº‹ä»¶åœ¨å“ªé‡Œï¼Ÿ&lt;/p&gt;\r\n&lt;h1 style=&quot;color: #ff0000;&quot;&gt;&lt;strong&gt;åˆ›é€ ä¸€ä¸ªäº‹ä»¶&lt;/strong&gt;&lt;/h1&gt;\r\n&lt;p&gt;ä¸‹é¢æ˜¯å®ƒæ‰€åœ¨çš„ä½ç½®ï¼Œä½ è¿˜å¯ä»¥çœ‹åˆ°ä»–æ˜¯æ€ä¹ˆè¢«åˆ›é€ çš„ã€‚&lt;/p&gt;\r\n&lt;pre&gt;&lt;code&gt;/**@var EventsManager $eventsManager */&lt;/code&gt;&lt;br /&gt;&lt;code&gt;$eventsManager = ObjectManager::getInstance(EventsManager::class);&lt;/code&gt;&lt;br /&gt;&lt;code&gt;$eventsManager-&amp;gt;dispatch(&#039;Framework_Module::module_upgrade&#039;);&lt;/code&gt;&lt;/pre&gt;\r\n&lt;p&gt;å½“ç„¶ï¼Œè¿™ä¸ªæ˜¯ä¸å¸¦æ•°æ®çš„äº‹ä»¶ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¸¦æ•°æ®çš„&lt;/p&gt;\r\n&lt;h1 style=&quot;color: #ff0000;&quot;&gt;&lt;strong&gt;ä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶&lt;/strong&gt;&lt;/h1&gt;\r\n&lt;p&gt;ä¸€ä¸ªå®Œæ•´çš„äº‹ä»¶ç”Ÿæˆåˆ°ç”³æ˜æ³¨å†Œè§‚å¯Ÿè€…Observerå†åˆ°è§‚å¯Ÿè€…ä¿®æ”¹æ•°æ®çš„è¿‡ç¨‹ã€‚&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆäº‹ä»¶ï¼š&lt;/strong&gt;&lt;/p&gt;\r\n&lt;pre&gt;&lt;code&gt;/**@var DataObject $installerPathData */&lt;/code&gt;&lt;br /&gt;&lt;code&gt;$installerPathData = ObjectManager::getInstance(DataObject::class);&lt;/code&gt;&lt;br /&gt;&lt;code&gt;$installerPathData&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    -&amp;gt;setData(&#039;installer&#039;, self::NAMESPACE . ucfirst($type) . &#039;\\Handle&#039;)&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    -&amp;gt;setData(&#039;register_arguments&#039;, $install_params);&lt;/code&gt;&lt;br /&gt;&lt;code&gt;/**@var EventsManager $eventsManager */&lt;/code&gt;&lt;br /&gt;&lt;code&gt;$eventsManager = ObjectManager::getInstance(EventsManager::class);&lt;/code&gt;&lt;br /&gt;&lt;code&gt;$eventsManager-&amp;gt;dispatch(&#039;Framework_Register::register_installer&#039;, [&#039;data&#039; =&amp;gt; $installerPathData]);&lt;/code&gt;&lt;br /&gt;&lt;code&gt;&lt;span style=&quot;color: #e67e23;&quot;&gt;$installer_class = $installerPathData-&amp;gt;getData(&#039;installer&#039;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;\r\n&lt;p&gt;&lt;span style=&quot;color: #e67e23;&quot;&gt;æ©™è‰²æ˜¯äº‹ä»¶ä¿®æ”¹è¿‡çš„æ•°æ®ã€‚&lt;/span&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;ç¬¬äºŒæ­¥ï¼Œå£°æ˜äº‹ä»¶è§‚å¯Ÿè€…&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;ç”³è¯·ä¸€ä¸ªå¸¦æ•°æ®çš„å¯¹è±¡å®ä¾‹åŒ–ï¼Œç„¶åä¼ ç»™äº‹ä»¶ç®¡ç†å™¨åˆ†å‘ä¸‹å»ã€‚&lt;/p&gt;\r\n&lt;p&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;&amp;lt;config xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;xs:noNamespaceSchemaLocation=&quot;urn:Weline_Framework::Event/etc/xsd/event.xsd&quot;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;xmlns=&quot;urn:Weline_Framework::Event/etc/xsd/event.xsd&quot;&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;&amp;lt;event name=&quot;Framework_phrase::get_words_file&quot;&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;&amp;lt;observer name=&quot;Weline_I18n::get_words_file&quot; instance=&quot;Weline\\I18n\\Observer\\GetWordsFile&quot; disabled=&quot;false&quot; shared=&quot;true&quot;/&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;&amp;lt;/event&amp;gt;&lt;/code&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;&amp;lt;event name=&quot;Framework_Register::register_installer&quot;&amp;gt;&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;&amp;lt;observer name=&quot;Weline_I18n::register_installer&quot; instance=&quot;Weline\\I18n\\Observer\\Register&quot; disabled=&quot;false&quot; shared=&quot;true&quot;/&amp;gt;&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;&amp;lt;/event&amp;gt;&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;code&gt;&amp;lt;/config&amp;gt;&lt;/code&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;strong&gt;ç¬¬ä¸‰æ­¥ï¼Œè§‚å¯Ÿè€…ä¿®æ”¹æ•°æ®&lt;/strong&gt;&lt;/p&gt;\r\n&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨&lt;/p&gt;\r\n&lt;pre&gt;Weline\\Theme\\Observer\\Register&lt;/pre&gt;\r\n&lt;p&gt;è¿™ä¸ªè§‚å¯Ÿè€…æ¥çœ‹æºç ï¼š&lt;/p&gt;\r\n&lt;pre&gt;&lt;code&gt;&amp;lt;?php&lt;/code&gt;&lt;br /&gt;&lt;br /&gt;&lt;code&gt;/*&lt;/code&gt;&lt;br /&gt;&lt;code&gt; * æœ¬æ–‡ä»¶ç”± ç§‹æ«é›é£ ç¼–å†™ï¼Œæ‰€æœ‰è§£é‡Šæƒå½’Aiwelineæ‰€æœ‰ã€‚&lt;/code&gt;&lt;br /&gt;&lt;code&gt; * é‚®ç®±ï¼šaiweline@qq.com&lt;/code&gt;&lt;br /&gt;&lt;code&gt; * ç½‘å€ï¼šaiweline.com&lt;/code&gt;&lt;br /&gt;&lt;code&gt; * è®ºå›ï¼šhttps://bbs.aiweline.com&lt;/code&gt;&lt;br /&gt;&lt;code&gt; */&lt;/code&gt;&lt;br /&gt;&lt;br /&gt;&lt;code&gt;namespace Weline\\Theme\\Observer;&lt;/code&gt;&lt;br /&gt;&lt;br /&gt;&lt;code&gt;use Weline\\Framework\\DataObject\\DataObject;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;use Weline\\Framework\\Event\\Event;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;use Weline\\Framework\\Event\\ObserverInterface;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;use Weline\\Framework\\Register\\RegisterInterface;&lt;/code&gt;&lt;br /&gt;&lt;code&gt;use Weline\\Theme\\Register\\Installer;&lt;/code&gt;&lt;br /&gt;&lt;br /&gt;&lt;code&gt;class Register implements ObserverInterface&lt;/code&gt;&lt;br /&gt;&lt;code&gt;{&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    public function execute(Event $event)&lt;/code&gt;&lt;br /&gt;&lt;code&gt;    {&lt;/code&gt;&lt;br /&gt;&lt;span style=&quot;color: #3598db;&quot;&gt;&lt;code&gt;        /**@var DataObject $data*/&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #3598db;&quot;&gt;&lt;code&gt;        $data           = $event-&amp;gt;getData(&#039;data&#039;);&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #3598db;&quot;&gt;&lt;code&gt;        $func_arguments = $data-&amp;gt;getData(&#039;register_arguments&#039;);&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #3598db;&quot;&gt;&lt;code&gt;        $type           = $func_arguments[0];&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;        if ($type === RegisterInterface::THEME) {&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;            $data-&amp;gt;setData(&#039;installer&#039;, Installer::class);&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;            $data-&amp;gt;setData(&#039;register_arguments&#039;, $func_arguments);&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: #e03e2d;&quot;&gt;&lt;code&gt;        }&lt;/code&gt;&lt;/span&gt;&lt;br /&gt;&lt;code&gt;    }&lt;/code&gt;&lt;br /&gt;&lt;code&gt;}&lt;/code&gt;&lt;/pre&gt;\r\n&lt;p&gt;Weline\\Theme\\Observer\\Registerè§‚å¯Ÿè€…å…ˆè·å–äº†æ•°æ®ï¼ˆ&lt;span style=&quot;color: #3598db;&quot;&gt;è“è‰²éƒ¨åˆ†&lt;/span&gt;ï¼‰ï¼Œä¿®æ”¹æ•°æ®ï¼ˆ&lt;span style=&quot;color: #e03e2d;&quot;&gt;çº¢è‰²éƒ¨åˆ†&lt;/span&gt;ï¼‰ï¼Œè‡³æ­¤ç¬¬ä¸€æ­¥çš„æ©™è‰²éƒ¨åˆ†ä»£ç å‚æ•°è¢«è§‚å¯Ÿè¿™ä¸ªWeline\\Theme\\Observer\\Registerç»™ä¿®æ”¹äº†ã€‚&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹å°±ä»‹ç»å®Œäº†ã€‚æ›´å¤šçš„äº‹ä»¶ï¼Œè¯·è‡ªè¡Œé˜…è¯»æºç ï¼Œæˆ–è€…ç­‰å¾…æ¡†æ¶æŠŠäº‹ä»¶åˆ—è¡¨æ‰€æœ‰äº‹ä»¶å†™åˆ°ç®¡ç†ç•Œé¢ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\r\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;', '2022-05-09 22:37:12', '2022-05-09 23:54:35');

SET FOREIGN_KEY_CHECKS = 1;
